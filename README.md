# 文件同步程序
一个简单的局域网文件夹同步程序
## 安全性
本程序使用的XML-RPC远程过程调用协议存在[安全漏洞](https://docs.python.org/zh-cn/3.10/library/xml.html#xml-vulnerabilities)，在使用本程序时**请确保仅与你信任的主机进行连接。**
## 运行环境
Windows操作系统，Python 3.10.5
## 运行
命令行下转到源代码所在文件夹，通过以下命令打开执行程序
`python myguiclient.py`
## 使用说明
### 初次使用
初次打开程序时，需先点击"选择共享文件夹"按钮设置共享文件夹路径。
服务器使用的默认端口为6666，一般情况下不需要更改端口。若此端口被其他程序占用，请点击"设置端口"按钮设置一个未被占用的端口。
本机的IP地址显示程序左上角。
### 建立连接
要在主机间建立连接，请先在另一台主机上运行本程序，并执行上面的初始化操作。
要在同一台主机上测试本程序，请先分别在两个命令行窗口运行本程序，并为两个程序设置不同的共享文件夹路径和端口号。
成功执行以上步骤后，在其中一个程序中点击"新的连接"按钮，在弹出的窗口中输入另一主机的IP地址并点击确定按钮。
若IP地址输入正确，此时在另一台主机上弹出窗口，询问是否允许连接，选择"是"。之后会弹出提示两台主机已成功连接。
若出现错误，请检查网络连接及防火墙设置并确保两台主机在同一局域网内。
### 同步文件
在其中一台主机A上点击"立即同步"按钮，会将此台主机上共享文件夹内的文件(不包括子文件夹及其中文件)同步到另一台主机B上的共享文件夹中。
**注意：同步并不是仅将主机A上共享文件夹中文件发送到主机B。而是使主机B共享文件夹内的文件结构变得完全与主机A上的相同。**
这包含以下三种情况：
* 仅在主机A上存在的文件会被发送到主机B
* 主机A和主机B上都存在但内容有差异的文件。来自主机A的文件会覆盖主机B的文件
* **仅在主机B上存在的文件将会被删除。**
由于删除操作不可撤销，所以**请仅和你信任的主机进行文件同步，建立单独的共享文件夹，并及时对文件进行备份。**

在同步的文件数目较多或体积较大时，程序可能会进入无响应状态，此时请耐心等待同步完成。强行关闭程序可能导致文件损坏。
### 程序数据存储
程序会自动将共享主机IP，共享文件夹等数据存储到源代码所在目录下的`data.pk`文件中。请不要修改或删除此文件。